# ozon_seller_api

___
Этот проект предоставляет набор функций и классов Python для работы с API Ozon Seller и Ozon Performance API. Он
предназначен для
упрощения взаимодействия с платформой OZON, облегчая анализ вашей эффективности продаж, отслеживание остатков и многое
другое.
___

### Особенности:

* Простой и согласованный доступ к API: Пакет предоставляет удобные функции для взаимодействия с различными методами API
  OZON.
* Обработка JSON-ответов: Пакет включает в себя функции для автоматического парсинга JSON-ответов от API в
  структурированные Python-объекты.
* Доступ к широкому спектру данных: Вы можете использовать пакет для получения данных о заказах, товарах, остатках,
  рейтинге магазина, статистике продаж и финансовых транзакциях.
* Гибкость и настройка: Пакет позволяет настроить запросы к API с помощью фильтров и параметров, чтобы получить именно
  те данные, которые вам нужны.
* Обработка ошибок: Пакет включает в себя механизмы обработки ошибок для обеспечения стабильности и надежности работы с
  API.

___

### Установка:

Этот проект пока не опубликован как пакет в PyPI. Чтобы использовать его, вам необходимо клонировать репозиторий и
установить зависимости:

- https://github.com/KlimAlexandrovich/OzonSellerApi.git
- cd ozon_seller_api
- pip install -r requirements.txt

___

### Структура пакета:

* `ozon_seller_api`: Основной модуль пакета.
    * `annotations`: Аннотации для получаемых по API данных.
        * `data.py`
    * `fetchers`: Классы и функции для получения данных.
        * `FBO.py`
        * `FBS.py`
        * `Finance.py`
        * `Products.py`
        * `SellerRating.py`
        * `WareHouses.py`
    * `tools`: Функции по обработке данных, вспомогательные функции и класс обработчики исключений.
        * `functions.py`
        * `exeptions.py`
    * `test`: Примеры использования пакета.
        * `examples.ipynb`

### Telegram бот

Файл `telegram_pnl_bot.py` содержит простой бот. Команда `/pnl` отправляет
значение прибыли за последнюю неделю. Дополнительно доступна команда
`/ads_stats`, возвращающая статистику из Ozon Performance API в виде JSON-файла.
=======
### Использование

Основной точкой входа является скрипт `telegram_pnl_bot.py`. После запуска бот
в Telegram будет отвечать на команду `/pnl` и возвращать значение PNL за
последние 7 дней. Перед запуском необходимо указать переменные окружения:

- `TELEGRAM_BOT_TOKEN` – токен вашего Telegram-бота.
- `OZON_CLIENT_ID` и `OZON_API_KEY` – данные для доступа к Ozon API.

Для запуска бота напрямую из Python выполните:

```bash
pip install -r requirements.txt
python telegram_pnl_bot.py
```

### Запуск в Docker

В репозитории присутствует `Dockerfile`, позволяющий собрать образ со всеми
зависимостями. Сборка образа:

```bash
docker build -t ozon_bot .
```

Запуск контейнера:

```bash
docker run -e TELEGRAM_BOT_TOKEN=<token> \
           -e OZON_CLIENT_ID=<client_id> \
           -e OZON_API_KEY=<api_key> ozon_bot
```

Контейнер автоматически запустит Telegram‑бота.


### Docker Compose

Для быстрого запуска используйте `docker-compose.yml`. Укажите переменные окружения `TELEGRAM_BOT_TOKEN`, `OZON_CLIENT_ID` и `OZON_API_KEY` и выполните:

```bash
docker-compose up --build
```

При желании можно добавить `-d`, чтобы запустить сервис в фоне. Контейнер автоматически запустит Telegram‑бота.
